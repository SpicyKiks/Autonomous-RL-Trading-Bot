project:
  name: "Autonomous RL Trading Bot"
  version: "v1"

run:
  seed: 1337
  artifacts_dir: "artifacts"
  timezone: "Europe/London"

logging:
  level: "INFO"
  console: true
  file: true

mode:
  id: "spot"   # "spot" or "futures"

db:
  path: ""
  filename: "bot.db"

exchange:
  name: "binance"
  demo: true
  spot:
    base_url_demo: "https://testnet.binance.vision"
    base_url_live: "https://api.binance.com"
  futures:
    base_url_demo: "https://demo-fapi.binance.com"
    base_url_live: "https://fapi.binance.com"
  defaults:
    symbol: "BTCUSDT"
    interval: "1m"
    limit: 1000

data:
  candles:
    lookback_minutes: 180
  dataset:
    symbol: "BTCUSDT"
    interval: "1m"
    window_minutes: 120
    strict_gaps: true
    features:
      - "return"
      - "log_return"

features: {}
env: {}
training: {}

# Step 5/6: deterministic offline backtesting (spot + futures)
evaluation:
  backtest:
    # strategy can be: buy_and_hold | sma_crossover | ema_crossover | rsi_reversion
    strategy: "buy_and_hold"

    # Shared execution params
    initial_cash: 1000.0
    order_size_quote: 0.0        # 0 => all-in for open/increase; close-all for CLOSE
    taker_fee_rate: 0.001
    slippage_bps: 5

    # Futures-only knobs (ignored for spot):
    leverage: 3.0
    maintenance_margin_rate: 0.005
    allow_short: true
    stop_on_liquidation: true

    # Step 6: Baseline strategy parameter defaults
    strategies:
      sma_crossover:
        fast: 10
        slow: 30
      ema_crossover:
        fast: 12
        slow: 26
      rsi_reversion:
        period: 14
        low: 30.0
        high: 70.0

live:
  policy: "baseline"               # baseline|sb3
  strategy: "buy_and_hold"         # baseline only
  strategy_params: {}              # optional overrides
  sb3_algo: "ppo"                  # sb3 only
  sb3_model_path: ""               # sb3 only (path to model zip)

  initial_equity: 1000.0
  position_fraction: 1.0
  fee_bps: 10.0
  slippage_bps: 5.0

  futures_leverage: 3.0
  maintenance_margin_rate: 0.005
  stop_on_liquidation: true

  lookback: 30
  poll_seconds: 2.0
  require_settled_ms: 250

  kill_switch_path: "artifacts/KILL_SWITCH"
  max_drawdown: 0.25
  min_seconds_between_trades: 15.0
  max_trades_per_hour: 30
